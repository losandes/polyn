/*! polyn 2016-12-04 */
!function(){"use strict";function a(a,d,e){var f,g;if(Array.isArray(d))for(f=0;f<d.length;f+=1)if(!c[d[f]])return b(new Error("[POLYN] Unable to define module: LOADED OUT OF ORDER"));g=new e(c),Object.defineProperty(c,a,{get:function(){return g},set:function(){return b(new Error("[POLYN] polyn modules are read-only"))},enumerable:!0,configurable:!1})}var b,c={};return b=function(a){var b=console.warn||console.log;return b(a.message,a),a},window?(Object.defineProperty(window,"polyn",{get:function(){return c},set:function(){return b(new Error("[POLYN] polyn modules are read-only"))},enumerable:!0,configurable:!1}),void Object.defineProperty(c,"addModule",{get:function(){return a},set:function(){return b(new Error("[POLYN] polyn modules are read-only"))},enumerable:!0,configurable:!1})):b(new Error("Unable to define module: UNKNOWN RUNTIME"))}(),function(){"use strict";function a(){var a={runAsync:void 0};return a.runAsync=function(a,b){b===!0&&"undefined"!=typeof process&&"function"==typeof process.nextTick?process.nextTick(a):setTimeout(a,0)},a}var b=a();"undefined"!=typeof module&&module.exports?module.exports=b:window&&window.polyn?window.polyn.addModule("async",null,a):console.log(new Error("[POLYN] Unable to define module: UNKNOWN RUNTIME or POLYN NOT DEFINED"))}(),function(){"use strict";function ObjectHelper(polyn){function setReadOnlyProperty(a,b,c,d){var e="the {{name}} property is read-only".replace(/{{name}}/,b);Object.defineProperty(a,b,{get:function(){return c},set:function(){if("function"==typeof d)return d(e);var a=new Error(e);return console.log(a),a},enumerable:!0,configurable:!1})}function copyValue(a){if(!a)return a;try{return isDate(a)?new Date(a):isFunction(a)?copyFunction(a):isObject(a)?syncCloneObject(a,!0):JSON.parse(JSON.stringify(a))}catch(a){return{type:locale.errorTypes.invalidArgumentException,error:a,messages:[a.message],isException:!0}}}function copyFunction(func){var newFunc,that,prop;if(func&&"function"!=typeof func)return{type:locale.errorTypes.invalidArgumentException,error:new Error(locale.errors.cannotCopyFunction),messages:[locale.errors.cannotCopyFunction],isException:!0};if(!func)return func;that=func.__clonedFrom||func,eval(FUNCTION_TEMPLATE.replace(/{{args}}/,getArgumentNames(func).join(", ")));for(prop in that)that.hasOwnProperty(prop)&&(newFunc[prop]=copyValue(that[prop]));return newFunc.__clonedFrom=that,newFunc}function getArgumentNames(a,b){return"function"!=typeof b?syncGetArgumentNames(a):void async.runAsync(function(){var c=syncGetArgumentNames(a);c.isException?b(c):b(null,c)})}function syncGetArgumentNames(a){var b,c;return a&&"function"!=typeof a?{type:locale.errorTypes.invalidArgumentException,error:new Error(locale.errors.cannotCopyFunction),messages:[locale.errors.cannotCopyFunction],isException:!0}:a?(b=a.toString().replace(STRIP_COMMENTS,""),c=b.slice(b.indexOf("(")+1,b.indexOf(")")).match(ARGUMENT_NAMES),null===c&&(c=[]),c):[]}function cloneObject(a,b,c){return"function"!=typeof c?syncCloneObject(a,b):void async.runAsync(function(){var d=syncCloneObject(a,b);d.isException?c(d):c(null,d)})}function syncCloneObject(a,b){var c,d={};"undefined"==typeof b&&(b=!0);for(c in a)if(a.hasOwnProperty(c)&&(b&&isObject(a[c])&&!isDate(a[c])?d[c]=syncCloneObject(a[c]):b||!isObject(a[c])||isDate(a[c])?d[c]=copyValue(a[c],d):d[c]=null,d[c]&&d[c].isException))return d[c];return d}function merge(a,b,c){return"function"!=typeof c?syncMerge(a,b):void async.runAsync(function(){var d=syncMerge(a,b);d.isException?c(d):c(null,d)})}function syncMerge(a,b){var c,d=syncCloneObject(a);for(c in b)b.hasOwnProperty(c)&&(isObject(b[c])&&!isDate(b[c])?d[c]=merge(a[c],b[c]):d[c]=b[c]);return d}function isDate(a){return"object"==typeof a&&"[object Date]"===Object.prototype.toString.call(a)}function isFunction(a){return"function"==typeof a}function isObject(a){return"object"==typeof a}var self={},async=polyn.async;return setReadOnlyProperty(self,"setReadOnlyProperty",setReadOnlyProperty),setReadOnlyProperty(self,"copyValue",copyValue),setReadOnlyProperty(self,"cloneObject",cloneObject),setReadOnlyProperty(self,"merge",merge),setReadOnlyProperty(self,"getArgumentNames",getArgumentNames),self}var STRIP_COMMENTS=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,ARGUMENT_NAMES=/([^\s,]+)/g,FUNCTION_TEMPLATE="newFunc = function ({{args}}) { return that.apply(that, arguments); }",locale={errorTypes:{invalidArgumentException:"InvalidArgumentException"},errors:{cannotCopyFunction:"Valid values for the function argument are a function, null, or undefined"}};"undefined"!=typeof module&&module.exports?module.exports=new ObjectHelper({async:require("./async.js")}):window&&window.polyn?window.polyn.addModule("objectHelper",["async"],ObjectHelper):console.log(new Error("[POLYN] Unable to define module: UNKNOWN RUNTIME or POLYN NOT DEFINED"))}(),function(){"use strict";function a(){var a,b={createUid:void 0,createGuid:void 0};return a=function(a){return a.replace(/[xy]/g,function(a){var b=16*Math.random()|0,c="x"===a?b:3&b|8;return c.toString(16)})},b.createUid=function(b){var c;return b=b||12,c=new Array(b+1).join("x"),a(c)},b.createGuid=function(){return a("xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx")},b}"undefined"!=typeof module&&module.exports?module.exports=new a:window&&window.polyn?window.polyn.addModule("id",null,a):console.log(new Error("[POLYN] Unable to define module: UNKNOWN RUNTIME or POLYN NOT DEFINED"))}(),function(){"use strict";function a(){var a,b,c={getType:void 0,defined:void 0,nullOrUndefined:void 0,function:void 0,object:void 0,array:void 0,string:void 0,bool:void 0,boolean:void 0,date:void 0,datetime:void 0,regexp:void 0,number:void 0,nullOrWhitespace:void 0,money:void 0,decimal:void 0,Window:void 0,not:{defined:void 0,function:void 0,object:void 0,array:void 0,string:void 0,bool:void 0,boolean:void 0,date:void 0,datetime:void 0,regexp:void 0,number:void 0,nullOrWhitespace:void 0,money:void 0,decimal:void 0,Window:void 0}},d={},e=["Boolean","Number","String","Function","Array","Date","RegExp","Object"];for(a=0;a<e.length;a+=1)b=e[a],d["[object "+b+"]"]=b.toLowerCase();return c.getType=function(a){return"undefined"==typeof a?"undefined":null===a?String(a):"object"==typeof a||"function"==typeof a?d[Object.prototype.toString.call(a)]||"object":typeof a},c.defined=function(a){try{return"undefined"!==c.getType(a)}catch(a){return!1}},c.not.defined=function(a){return c.defined(a)===!1},c.nullOrUndefined=function(a){return c.not.defined(a)||null===a},c.not.nullOrWhitespace=function(a){return"undefined"!=typeof a&&null!==typeof a&&!c.not.string(a)&&/([^\s])/.test(a)},c.nullOrWhitespace=function(a){return c.not.nullOrWhitespace(a)===!1},c.function=function(a){return"function"===c.getType(a)},c.not.function=function(a){return c.function(a)===!1},c.object=function(a){return"object"===c.getType(a)},c.not.object=function(a){return c.object(a)===!1},c.array=function(a){return"array"===c.getType(a)},c.not.array=function(a){return c.array(a)===!1},c.string=function(a){return"string"===c.getType(a)},c.not.string=function(a){return c.string(a)===!1},c.bool=function(a){return"boolean"===c.getType(a)},c.not.bool=function(a){return c.boolean(a)===!1},c.boolean=function(a){return"boolean"===c.getType(a)},c.not.boolean=function(a){return c.boolean(a)===!1},c.datetime=function(a){return"date"===c.getType(a)&&c.function(a.getTime)&&!isNaN(a.getTime())},c.not.datetime=function(a){return c.datetime(a)===!1},c.date=c.datetime,c.not.date=c.not.datetime,c.regexp=function(a){return"regexp"===c.getType(a)},c.not.regexp=function(a){return c.regexp(a)===!1},c.number=function(a){return"number"===c.getType(a)},c.not.number=function(a){return c.number(a)===!1},c.money=function(a){return c.defined(a)&&/^(?:-)?[0-9]\d*(?:\.\d{0,2})?$/.test(a.toString())},c.not.money=function(a){return c.money(a)===!1},c.decimal=function(a,b){return!c.not.number(a)&&(!(b||!c.number(a))||!(!a||+(+a||0).toFixed(b)!==+a))},c.not.decimal=function(a){return c.decimal(a)===!1},c.Window=function(a){return c.defined(Window)&&a instanceof Window},c.not.Window=function(a){return c.Window(a)===!1},c}"undefined"!=typeof module&&module.exports?module.exports=new a:window&&window.polyn?window.polyn.addModule("is",null,a):console.log(new Error("[POLYN] Unable to define module: UNKNOWN RUNTIME or POLYN NOT DEFINED"))}(),function(){"use strict";function a(a){return"string"==typeof a?a:"Exception"}function b(a,b){if("object"==typeof a)return a;var c=b;return"string"==typeof b?(f.onWarning(e),c=new Error(b)):b||(f.onWarning(e),c=new Error("UNKNOWN")),c}function c(a,b){var c=[];return Array.isArray(b)?c=b:b?c.push(b):!b&&a&&a.message&&c.push(a.message),c}function d(d,e,f){var g=b(d,e);return{type:a(d),error:g,messages:c(g,f),isException:!0}}var e="[POLYN] EXCEPTION WARNING: You should always pass an Error to Exception, to preserve your stack trace",f={onWarning:function(a){console.log(a)}};"undefined"!=typeof module&&module.exports?module.exports=d:window&&window.polyn?window.polyn.addModule("Exception",null,function(){return d}):console.log(new Error("[POLYN] Unable to define module: UNKNOWN RUNTIME or POLYN NOT DEFINED")),d.configure=function(a){a=a||{},"function"==typeof a.onWarning&&(f.onWarning=a.onWarning)}}(),function(){"use strict";function a(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x=a.async,y=a.id,z=a.is,A=a.Exception,B=a.objectHelper,C={},D={v20161119:new Date("2016-11-19"),v20161120:new Date("2016-11-20")},E={errorTypes:{invalidArgumentException:"InvalidArgumentException",readOnlyViolation:"ReadOnlyViolation"},errors:{requiresImplementation:"An implementation is required to create a new instance of an interface",requiresProperty:"This implementation does not satisfy blueprint, {{blueprint}}. It should have the property, {{property}}, with type, {{type}}.",requiresArguments:"This implementation does not satisfy blueprint, {{blueprint}}. The function, {{property}}, is missing arguments",missingConstructorArgument:"An object literal is required when constructing a Blueprint",missingSignaturesMatchBlueprintArgument:"The `blueprint` argument is required",missingSignaturesMatchImplementationArgument:"The `implementation` argument is required",missingSignaturesMatchCallbackArgument:"The `callback` argument is required",configurationCompatibilityIsNotValid:"The date you tried to set the Blueprint compatibility to is not valid",validatePropertyInvalidArgs:"To validate a single property, you must provide the blueprint, and the property name",validatePropertyNoBlueprintValue:"The {{property}} property does not exist on the blueprint",validatePropertyFailed:"An error occurred while validating the property"}};return c=function(a,b,c){var d;a=o(a),d=function(d,e){d||p(a,b),"function"==typeof c&&c(d,e)},e(a,b,d)},d=function(a,b){var c;return a=o(a),c=f(a,b),c.result&&p(a,b),c},e=function(a,b,c){x.runAsync(function(){var d=f(a,b);d.result?c(null,!0):c(d.errors,!1)})},f=function(a,b){var c,d=[];if(q(a,b))return{errors:null,result:!0};for(c in b.props)b.props.hasOwnProperty(c)&&g(b.__blueprintId,a,c,b.props[c],d);return d.length>0?{errors:d,result:!1}:{errors:null,result:!0}},g=function(a,b,c,d,e){z.string(d)?i(a,b,c,d,e):z.regexp(d)?n(a,b,c,d,e):z.object(d)&&h(a,b,c,d,d.type,e)},h=function(a,b,c,d,e,f){if(d.required!==!1||!z.not.defined(b[c])&&null!==b[c])if(z.function(d.validate))d.validate(b[c],f,b);else switch(e){case"blueprint":m(d.blueprint,b,c,f);break;case"function":i(a,b,c,e,f),d.args&&j(a,b,c,d.args,f);break;case"decimal":k(a,b,c,d.places,f);break;case"expression":n(a,b,c,d.expression,f);break;default:i(a,b,c,e,f)}},i=function(a,b,c,d,e){z.function(z.not[d])&&z.not[d](b[c])&&e.push(t(E.errors.requiresProperty,a,c,d))},j=function(a,b,c,d,e){var f,g;if(f=z.array(d),f=f&&d.length>0,f=f&&z.function(b[c]),f=f&&b[c].length===d.length,!f){try{g=d.join(", ")}catch(a){g=d.toString()}e.push(t(E.errors.requiresArguments,a,c,g))}},k=function(a,b,c,d,e){z.not.decimal(b[c],d)&&e.push(t(E.errors.requiresProperty,a,c,"decimal with "+d+" places"))},l=function(a,b,c,d){z.function(z.not.boolean)&&z.not.boolean(b[c])&&d.push(t(E.errors.requiresProperty,a,c,"boolean"))},m=function(a,b,c,d){var e,f=a.syncSignatureMatches(b[c]);if(!f.result)for(e=0;e<f.errors.length;e+=1)d.push(f.errors[e])},n=function(a,b,c,d,e){d.test(b[c])===!1&&e.push(t(E.errors.requiresProperty,a,c,d.toString()))},o=function(a){return C.rememberValidation&&(a[C.memoryPropertName]=a[C.memoryPropertName]||{}),a},p=function(a,b){return C.rememberValidation&&(a[C.memoryPropertName][b.__blueprintId]=!0),a},q=function(a,b){return a[C.memoryPropertName]&&a[C.memoryPropertName][b.__blueprintId]},r=function(a,b){return b<a},s=function(a,b){return b>a},t=function(a,b,c,d){return a.replace(/{{blueprint}}/gi,b).replace(/{{property}}/gi,c).replace(/{{type}}/gi,d)},u=function(a,b,c){B.setReadOnlyProperty(a,b,c,function(){var a=new A(E.errorTypes.readOnlyViolation,new Error(b+" is read-only"));return C.onError(a),a})},b=function(a){var c,d={},e={},f=!1;a=a||{};for(c in a)if(a.hasOwnProperty(c))if("__blueprintId"===c)u(d,"__blueprintId",a.__blueprintId);else if(b.isValidatableProperty(a[c]))u(e,c,a[c]);else{f=!0;var g=new A(E.errorTypes.invalidArgumentException,new Error(c+" is not validatable by Blueprint"));C.onError(g)}return z.not.string(d.__blueprintId)&&u(d,"__blueprintId",y.createUid(8)),u(d,"props",e),u(d,"validate",function(a,c){return b.validate(d,a,c)}),u(d,"validateProperty",function(a,c,e){return b.validateProperty(d,a,c,e)}),u(d,"signatureMatches",function(a,c){return b.validate(d,a,c)}),u(d,"syncSignatureMatches",function(a){return b.syncValidate(d,a)}),u(d,"inherits",function(a){return b.syncMerge([d,a])}),u(d,"hasInvalidProperties",f),u(d,"getSchema",function(){return B.cloneObject(a)}),d},b.validate=function(a,d,e){return z.not.function(e)?b.syncValidate(a,d):void x.runAsync(function(){c(d,a,e)})},b.syncValidate=function(a,b){return z.not.defined(a)?{errors:[E.errors.missingSignaturesMatchBlueprintArgument],result:!1}:z.not.defined(b)?{errors:[E.errors.missingSignaturesMatchImplementationArgument],result:!1}:d(b,a)},b.validateProperty=function(a,c,d,e){return z.not.function(e)?b.syncValidateProperty(a,c,d):void x.runAsync(function(){var f=b.syncValidateProperty(a,c,d);return f?void e(f.errors,f.result):e([E.errors.validatePropertyFailed],!1)})},b.syncValidateProperty=function(a,b,c){var d,e={},f=[];return z.not.defined(a)||z.not.string(b)?{errors:[E.errors.validatePropertyInvalidArgs],result:!1}:(d=a.props&&a.props[b]||a[b],z.not.defined(d)?{errors:[E.errors.validatePropertyNoBlueprintValue.replace(/{{property}}/,b)],result:!1}:(e[b]=c,g(a.__blueprintId,e,b,d,f),{errors:0===f.length?null:f,result:0===f.length}))},b.merge=function(a,c){return"function"!=typeof c?b.syncMerge(a):void x.runAsync(function(){c(null,b.syncMerge(a))})},b.syncMerge=function(a){var b,c,d=!0;if(!Array.isArray(a))return null;for(b=a.shift();d&&(d=a.shift());)for(c in d.props)d.props.hasOwnProperty(c)&&(b.props[c]=b.props[c]||d.props[c]);return b},v=function(a){if(z.string(a.compatibility))try{C.compatibility=new Date(a.compatibility)}catch(a){C.compatibility=new Date("2016-11-19"),console.log(E.errors.configurationCompatibilityIsNotValid)}else z.date(a.compatibility)?C.compatibility=a.compatibility:C.compatibility=new Date("2016-11-19")},w=function(){s(D.v20161119,C.compatibility)?(C.rememberValidation=!1,C.memoryPropertName="__blueprints"):(C.rememberValidation=!0,C.memoryPropertName="__interfaces"),C.onError=function(a){console.log(a)}},b.types=["array","blueprint","bool","boolean","date","datetime","decimal","expression","function","money","nullOrWhitespace","number","object","regexp","string"],b.isValidatableProperty=function(a){return!!a&&!!(a.__blueprintId||z.string(a)&&b.types.indexOf(a)>-1||z.string(a.type)&&b.types.indexOf(a.type)>-1||z.regexp(a)||z.function(a.validate))},b.configure=function(a){return a=a||{},v(a),w(),z.defined(a.rememberValidation)&&(C.rememberValidation=a.rememberValidation),z.function(a.onError)&&(C.onError=a.onError),B.copyValue(C)},b.configure(),b}"undefined"!=typeof module&&module.exports?module.exports=a({async:require("./async.js"),id:require("./id.js"),is:require("./is.js"),Exception:require("./Exception.js"),objectHelper:require("./objectHelper.js")}):window&&window.polyn?window.polyn.addModule("Blueprint",["async","id","is","Exception","objectHelper"],a):console.log(new Error("[POLYN] Unable to define module: UNKNOWN RUNTIME or POLYN NOT DEFINED"))}(),function(){"use strict";function a(a){function c(a){function f(a){var c,f={};if(a=a||{},r.__skipValdation!==!0&&!j.validate(k,a).result){var h=new g(new Error(b.errors.initialValidationFailed),j.validate(k,a).errors);return o.onError(h),h}try{for(c in r)r.hasOwnProperty(c)&&(a[c]?d(f,r,a,c):e(f,c))}catch(a){return new g(a)}return f}var k,p,q,r={};if(!a)return new g(new Error("A schema object, and values are required"));for(p in a)a.hasOwnProperty(p)&&(!m.object(a[p])||j.isValidatableProperty(a[p])||a[p].__immutableCtor?r[p]=a[p]:r[p]=new c(a[p]),r[p].__immutableCtor&&(q=p.substring(0,1).toUpperCase()+p.substring(1),f[q]=r[p]));return k=new j(r),h(f,"merge",function(a,b,c){if("function"!=typeof c){var d;return i(f,a,b,function(a,b){d=a||b}),d}n.runAsync(function(){i(f,a,b,c)})}),h(f,"toObject",function(a,b){return l.cloneObject(a,!0,b)}),h(f,"validate",function(a,b){return j.validate(k,a,b)}),h(f,"validateProperty",function(a,c,d){if(!a&&m.function(d))d([b.errors.validatePropertyInvalidArgs],!1);else if(!a)return{errors:[b.errors.validatePropertyInvalidArgs],result:!1};return j.validateProperty(k,c,a[c],d)}),h(f,"log",function(a){a?console.log(f.toObject(a)):console.log(null)}),h(f,"getSchema",function(b){return l.cloneObject(a,!0,b)}),h(f,"blueprint",k),h(f,"__immutableCtor",!0),f}function d(a,b,c,d){if(b[d].__immutableCtor&&m.function(b[d])){var e=b[d];l.setReadOnlyProperty(a,d,new e(c[d]),f(d))}else l.setReadOnlyProperty(a,d,l.copyValue(c[d]),f(d))}function e(a,b){l.setReadOnlyProperty(a,b,null,f(b))}function f(a){return function(){var c=new k(b.errorTypes.readOnlyViolation,new Error("Cannot set `"+a+"`. This object is immutable"));return o.onError(c),c}}function g(a,c){return new k(b.errorTypes.invalidArgumentException,a,c)}function h(a,c,d){l.setReadOnlyProperty(a,c,d,function(){var a=new k(b.errorTypes.readOnlyViolation,new Error(c+" is read-only"));return o.onError(a),a})}function i(a,b,c,d){var e,f=l.merge(b,c);return f.isException?d(f):(e=new a(f),e.isException?d(e):d(null,e))}var j=a.Blueprint,k=a.Exception,l=a.objectHelper,m=a.is,n=a.async,o={onError:function(a){console.log(a)}};return c.configure=function(a){a=a||{},m.function(a.onError)&&(o.onError=a.onError)},c}var b={errorTypes:{invalidArgumentException:"InvalidArgumentException",readOnlyViolation:"ReadOnlyViolation"},errors:{initialValidationFailed:"The argument passed to the constructor is not valid",validatePropertyInvalidArgs:"To validate a property, you must provide the instance, and property name"}};"undefined"!=typeof module&&module.exports?module.exports=a({Blueprint:require("./Blueprint.js"),Exception:require("./Exception.js"),objectHelper:require("./objectHelper.js"),is:require("./is.js"),async:require("./async.js")}):window&&window.polyn?window.polyn.addModule("Immutable",["async","Blueprint","is","Exception","objectHelper"],a):console.log(new Error("[POLYN] Unable to define module: UNKNOWN RUNTIME or POLYN NOT DEFINED"))}();