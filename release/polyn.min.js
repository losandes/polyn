/*! polyn 2016-12-02 */
!function(){"use strict";function a(){var a={runAsync:void 0};return a.runAsync=function(a,b){b===!0&&"undefined"!=typeof process&&"function"==typeof process.nextTick?process.nextTick(a):setTimeout(a,0)},a}var b=a();"undefined"!=typeof module&&module.exports?module.exports=b:window?(window.polyn=window.polyn||{},Object.defineProperty(window.polyn,"async",{get:function(){return b},set:function(){var a=new Error("[POLYN] polyn modules are read-only");return console.log(a),a},enumerable:!0,configurable:!1})):console.log("[POLYN] Unable to define module: UNKNOWN RUNTIME")}(),function(){"use strict";function ObjectHelper(){function setReadOnlyProperty(a,b,c,d){var e="the {{name}} property is read-only".replace(/{{name}}/,b);Object.defineProperty(a,b,{get:function(){return c},set:function(){if("function"==typeof d)return d(e);var a=new Error(e);return console.log(a),a},enumerable:!0,configurable:!1})}function copyValue(a){return a?isDate(a)?new Date(a):isFunction(a)?copyFunction(a):isObject(a)?cloneObject(a,!0):JSON.parse(JSON.stringify(a)):a}function copyFunction(func){var newFunc,prop;eval("newFunc = "+func.toString());for(prop in func)func.hasOwnProperty(prop)&&(newFunc[prop]=copyValue(func[prop]));return newFunc}function cloneObject(a,b){var c,d={};"undefined"==typeof b&&(b=!0);for(c in a)a.hasOwnProperty(c)&&(b&&isObject(a[c])&&!isDate(a[c])?d[c]=cloneObject(a[c]):b||!isObject(a[c])||isDate(a[c])?d[c]=copyValue(a[c],d):d[c]=null);return d}function merge(a,b){var c,d=objectHelper.cloneObject(a);for(c in b)b.hasOwnProperty(c)&&(isObject(b[c])&&!isDate(b[c])?d[c]=merge(a[c],b[c]):d[c]=b[c]);return d}function isDate(a){return"object"==typeof a&&"[object Date]"===Object.prototype.toString.call(a)}function isFunction(a){return"function"==typeof a}function isObject(a){return"object"==typeof a}var self={};return setReadOnlyProperty(self,"setReadOnlyProperty",setReadOnlyProperty),setReadOnlyProperty(self,"copyValue",copyValue),setReadOnlyProperty(self,"cloneObject",cloneObject),setReadOnlyProperty(self,"merge",merge),self}var objectHelper=ObjectHelper();"undefined"!=typeof module&&module.exports?module.exports=objectHelper:window?(window.polyn=window.polyn||{},Object.defineProperty(window.polyn,"objectHelper",{get:function(){return objectHelper},set:function(){var a=new Error("[POLYN] polyn modules are read-only");return console.log(a),a},enumerable:!0,configurable:!1})):console.log("[POLYN] Unable to define module: UNKNOWN RUNTIME")}(),function(){"use strict";function a(){var a,b={createUid:void 0,createGuid:void 0};return a=function(a){return a.replace(/[xy]/g,function(a){var b=16*Math.random()|0,c="x"===a?b:3&b|8;return c.toString(16)})},b.createUid=function(b){var c;return b=b||12,c=new Array(b+1).join("x"),a(c)},b.createGuid=function(){return a("xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx")},b}var b=a();"undefined"!=typeof module&&module.exports?module.exports=b:window?(window.polyn=window.polyn||{},Object.defineProperty(window.polyn,"id",{get:function(){return b},set:function(){var a=new Error("[POLYN] polyn modules are read-only");return console.log(a),a},enumerable:!0,configurable:!1})):console.log("[POLYN] Unable to define module: UNKNOWN RUNTIME")}(),function(){"use strict";function a(){var a,b,c={getType:void 0,defined:void 0,nullOrUndefined:void 0,function:void 0,object:void 0,array:void 0,string:void 0,bool:void 0,boolean:void 0,date:void 0,datetime:void 0,regexp:void 0,number:void 0,nullOrWhitespace:void 0,money:void 0,decimal:void 0,Window:void 0,not:{defined:void 0,function:void 0,object:void 0,array:void 0,string:void 0,bool:void 0,boolean:void 0,date:void 0,datetime:void 0,regexp:void 0,number:void 0,nullOrWhitespace:void 0,money:void 0,decimal:void 0,Window:void 0}},d={},e=["Boolean","Number","String","Function","Array","Date","RegExp","Object"];for(a=0;a<e.length;a+=1)b=e[a],d["[object "+b+"]"]=b.toLowerCase();return c.getType=function(a){return"undefined"==typeof a?"undefined":null===a?String(a):"object"==typeof a||"function"==typeof a?d[Object.prototype.toString.call(a)]||"object":typeof a},c.defined=function(a){try{return"undefined"!==c.getType(a)}catch(a){return!1}},c.not.defined=function(a){return c.defined(a)===!1},c.nullOrUndefined=function(a){return c.not.defined(a)||null===a},c.not.nullOrWhitespace=function(a){return"undefined"!=typeof a&&null!==typeof a&&!c.not.string(a)&&/([^\s])/.test(a)},c.nullOrWhitespace=function(a){return c.not.nullOrWhitespace(a)===!1},c.function=function(a){return"function"===c.getType(a)},c.not.function=function(a){return c.function(a)===!1},c.object=function(a){return"object"===c.getType(a)},c.not.object=function(a){return c.object(a)===!1},c.array=function(a){return"array"===c.getType(a)},c.not.array=function(a){return c.array(a)===!1},c.string=function(a){return"string"===c.getType(a)},c.not.string=function(a){return c.string(a)===!1},c.bool=function(a){return"boolean"===c.getType(a)},c.not.bool=function(a){return c.boolean(a)===!1},c.boolean=function(a){return"boolean"===c.getType(a)},c.not.boolean=function(a){return c.boolean(a)===!1},c.datetime=function(a){return"date"===c.getType(a)&&c.function(a.getTime)&&!isNaN(a.getTime())},c.not.datetime=function(a){return c.datetime(a)===!1},c.date=c.datetime,c.not.date=c.not.datetime,c.regexp=function(a){return"regexp"===c.getType(a)},c.not.regexp=function(a){return c.regexp(a)===!1},c.number=function(a){return"number"===c.getType(a)},c.not.number=function(a){return c.number(a)===!1},c.money=function(a){return c.defined(a)&&/^(?:-)?[0-9]\d*(?:\.\d{0,2})?$/.test(a.toString())},c.not.money=function(a){return c.money(a)===!1},c.decimal=function(a,b){return!c.not.number(a)&&(!(b||!c.number(a))||!(!a||+(+a||0).toFixed(b)!==+a))},c.not.decimal=function(a){return c.decimal(a)===!1},c.Window=function(a){return c.defined(Window)&&a instanceof Window},c.not.Window=function(a){return c.Window(a)===!1},c}var b=a();"undefined"!=typeof module&&module.exports?module.exports=b:window?(window.polyn=window.polyn||{},Object.defineProperty(window.polyn,"is",{get:function(){return b},set:function(){var a=new Error("[POLYN] polyn modules are read-only");return console.log(a),a},enumerable:!0,configurable:!1})):console.log("[POLYN] Unable to define module: UNKNOWN RUNTIME")}(),function(){"use strict";function a(a){return"string"==typeof a?a:"Exception"}function b(a,b){if("object"==typeof a)return a;var c=b;return"string"==typeof b?(f.onWarning(e),c=new Error(b)):b||(f.onWarning(e),c=new Error("UNKNOWN")),c}function c(a,b){var c=[];return Array.isArray(b)?c=b:b?c.push(b):!b&&a&&a.message&&c.push(a.message),c}function d(d,e,f){var g=b(d,e);return{type:a(d),error:g,messages:c(g,f),isException:!0}}var e="[POLYN] EXCEPTION WARNING: You should always pass an Error to Exception, to preserve your stack trace",f={onWarning:function(a){console.log(a)}};"undefined"!=typeof module&&module.exports?module.exports=d:window?(window.polyn=window.polyn||{},Object.defineProperty(window.polyn,"Exception",{get:function(){return d},set:function(){var a=new Error("polyn modules are read-only");return console.log(a),a},enumerable:!0,configurable:!1})):console.log("Unable to define module: UNKNOWN RUNTIME"),d.configure=function(a){a=a||{},"function"==typeof a.onWarning&&(f.onWarning=a.onWarning)}}(),function(){"use strict";function a(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B={},C={v20161119:new Date("2016-11-19"),v20161120:new Date("2016-11-20")},D={errorTypes:{invalidArgumentException:"InvalidArgumentException",readOnlyViolation:"ReadOnlyViolation"},errors:{requiresImplementation:"An implementation is required to create a new instance of an interface",requiresProperty:"This implementation does not satisfy blueprint, {{blueprint}}. It should have the property, {{property}}, with type, {{type}}.",requiresArguments:"This implementation does not satisfy blueprint, {{blueprint}}. The function, {{property}}, is missing arguments",missingConstructorArgument:"An object literal is required when constructing a Blueprint",missingSignaturesMatchBlueprintArgument:"The `blueprint` argument is required",missingSignaturesMatchImplementationArgument:"The `implementation` argument is required",missingSignaturesMatchCallbackArgument:"The `callback` argument is required",configurationCompatibilityIsNotValid:"The date you tried to set the Blueprint compatibility to is not valid",validatePropertyInvalidArgs:"To validate a single property, you must provide the blueprint, and the property name",validatePropertyNoBlueprintValue:"The {{property}} property does not exist on the blueprint",validatePropertyFailed:"An error occurred while validating the property"}};return g=function(a,b,c){var d;a=s(a),d=function(d,e){d||t(a,b),"function"==typeof c&&c(d,e)},i(a,b,d)},h=function(a,b){var c;return a=s(a),c=j(a,b),c.result&&t(a,b),c},i=function(b,c,d){a.runAsync(function(){var a=j(b,c);a.result?d(null,!0):d(a.errors,!1)})},j=function(a,b){var c,d=[];if(u(a,b))return{errors:null,result:!0};for(c in b.props)b.props.hasOwnProperty(c)&&k(b.__blueprintId,a,c,b.props[c],d);return d.length>0?{errors:d,result:!1}:{errors:null,result:!0}},k=function(a,b,d,e,f){c.string(e)?m(a,b,d,e,f):c.regexp(e)?r(a,b,d,e,f):c.object(e)&&l(a,b,d,e,e.type,f)},l=function(a,b,d,e,f,g){if(e.required!==!1||!c.not.defined(b[d])&&null!==b[d])if(c.function(e.validate))e.validate(b[d],g,b);else switch(f){case"blueprint":q(e.blueprint,b,d,g);break;case"function":m(a,b,d,f,g),e.args&&n(a,b,d,e.args,g);break;case"decimal":o(a,b,d,e.places,g);break;case"expression":r(a,b,d,e.expression,g);break;default:m(a,b,d,f,g)}},m=function(a,b,d,e,f){c.function(c.not[e])&&c.not[e](b[d])&&f.push(x(D.errors.requiresProperty,a,d,e))},n=function(a,b,d,e,f){var g,h;if(g=c.array(e),g=g&&e.length>0,g=g&&c.function(b[d]),g=g&&b[d].length===e.length,!g){try{h=e.join(", ")}catch(a){h=e.toString()}f.push(x(D.errors.requiresArguments,a,d,h))}},o=function(a,b,d,e,f){c.not.decimal(b[d],e)&&f.push(x(D.errors.requiresProperty,a,d,"decimal with "+e+" places"))},p=function(a,b,d,e){c.function(c.not.boolean)&&c.not.boolean(b[d])&&e.push(x(D.errors.requiresProperty,a,d,"boolean"))},q=function(a,b,c,d){var e,f=a.syncSignatureMatches(b[c]);if(!f.result)for(e=0;e<f.errors.length;e+=1)d.push(f.errors[e])},r=function(a,b,c,d,e){d.test(b[c])===!1&&e.push(x(D.errors.requiresProperty,a,c,d.toString()))},s=function(a){return B.rememberValidation&&(a[B.memoryPropertName]=a[B.memoryPropertName]||{}),a},t=function(a,b){return B.rememberValidation&&(a[B.memoryPropertName][b.__blueprintId]=!0),a},u=function(a,b){return a[B.memoryPropertName]&&a[B.memoryPropertName][b.__blueprintId]},v=function(a,b){return b<a},w=function(a,b){return b>a},x=function(a,b,c,d){return a.replace(/{{blueprint}}/gi,b).replace(/{{property}}/gi,c).replace(/{{type}}/gi,d)},y=function(a,b,c){e.setReadOnlyProperty(a,b,c,function(){var a=new d(D.errorTypes.readOnlyViolation,new Error(b+" is read-only"));return B.onError(a),a})},f=function(a){var g,h={},i={},j=!1;a=a||{};for(g in a)if(a.hasOwnProperty(g))if("__blueprintId"===g)y(h,"__blueprintId",a.__blueprintId);else if(f.isValidatableProperty(a[g]))i[g]=a[g];else{j=!0;var k=new d(D.errorTypes.invalidArgumentException,new Error(g+" is not validatable by Blueprint"));B.onError(k)}return c.not.string(h.__blueprintId)&&y(h,"__blueprintId",b.createUid(8)),y(h,"props",i),y(h,"validate",function(a,b){return f.validate(h,a,b)}),y(h,"validateProperty",function(a,b,c){return f.validateProperty(h,a,b,c)}),y(h,"signatureMatches",function(a,b){return f.validate(h,a,b)}),y(h,"syncSignatureMatches",function(a){return f.syncValidate(h,a)}),y(h,"inherits",function(a){return f.syncMerge([h,a])}),y(h,"hasInvalidProperties",j),y(h,"getSchema",function(){return e.cloneObject(a)}),h},f.validate=function(b,d,e){return c.not.function(e)?f.syncValidate(b,d):void a.runAsync(function(){g(d,b,e)})},f.syncValidate=function(a,b){return c.not.defined(a)?{errors:[D.errors.missingSignaturesMatchBlueprintArgument],result:!1}:c.not.defined(b)?{errors:[D.errors.missingSignaturesMatchImplementationArgument],result:!1}:h(b,a)},f.validateProperty=function(b,d,e,g){return c.not.function(g)?f.syncValidateProperty(b,d,e):void a.runAsync(function(){var a=f.syncValidateProperty(b,d,e);return a?void g(a.errors,a.result):g([D.errors.validatePropertyFailed],!1)})},f.syncValidateProperty=function(a,b,d){var e,f={},g=[];return c.not.defined(a)||c.not.string(b)?{errors:[D.errors.validatePropertyInvalidArgs],result:!1}:(e=a.props&&a.props[b]||a[b],c.not.defined(e)?{errors:[D.errors.validatePropertyNoBlueprintValue.replace(/{{property}}/,b)],result:!1}:(f[b]=d,k(a.__blueprintId,f,b,e,g),{errors:0===g.length?null:g,result:0===g.length}))},f.merge=function(b,c){return"function"!=typeof c?f.syncMerge(b):void a.runAsync(function(){c(null,f.syncMerge(b))})},f.syncMerge=function(a){var b,c,d=!0;if(!Array.isArray(a))return null;for(b=a.shift();d&&(d=a.shift());)for(c in d.props)d.props.hasOwnProperty(c)&&(b.props[c]=b.props[c]||d.props[c]);return b},z=function(a){if(c.string(a.compatibility))try{B.compatibility=new Date(a.compatibility)}catch(a){B.compatibility=new Date("2016-11-19"),console.log(D.errors.configurationCompatibilityIsNotValid)}else c.date(a.compatibility)?B.compatibility=a.compatibility:B.compatibility=new Date("2016-11-19")},A=function(){w(C.v20161119,B.compatibility)?(B.rememberValidation=!1,B.memoryPropertName="__blueprints"):(B.rememberValidation=!0,B.memoryPropertName="__interfaces"),B.onError=function(a){console.log(a)}},f.types=["array","blueprint","bool","boolean","date","datetime","decimal","expression","function","money","nullOrWhitespace","number","object","regexp","string"],f.isValidatableProperty=function(a){return!!a&&!!(a.__blueprintId||c.string(a)&&f.types.indexOf(a)>-1||c.string(a.type)&&f.types.indexOf(a.type)>-1||c.regexp(a)||c.function(a.validate))},f.configure=function(a){return a=a||{},z(a),A(),c.defined(a.rememberValidation)&&(B.rememberValidation=a.rememberValidation),c.function(a.onError)&&(B.onError=a.onError),e.copyValue(B)},f.configure(),f}var b;if("undefined"!=typeof module&&module.exports)module.exports=a(require("./async.js"),require("./id.js"),require("./is.js"),require("./Exception.js"),require("./objectHelper.js"));else if(window){if(!(window.polyn&&window.polyn.async&&window.polyn.id&&window.polyn.is&&window.polyn.Exception&&window.polyn.objectHelper))return console.log("Unable to define module: LOADED OUT OF ORDER");b=a(window.polyn.async,window.polyn.id,window.polyn.is,window.polyn.Exception,window.polyn.objectHelper),window.polyn.objectHelper.setReadOnlyProperty(window.polyn,"Blueprint",b,function(){var a=new Error("[POLYN] polyn modules are read-only");return console.log(a),a})}else console.log("Unable to define module: UNKNOWN RUNTIME")}(),function(){"use strict";function a(a,b,d,e){function f(b){function i(b){var d,e={};if(b=b||{},p.__skipValdation!==!0&&!a.validate(m,b).result){var f=new j(new Error(c.errors.initialValidationFailed),a.validate(m,b).errors);return l.onError(f),f}try{for(d in p)p.hasOwnProperty(d)&&(b[d]?g(e,p,b,d):h(e,d))}catch(a){return new j(a)}return e}var m,n,o,p={};if(!b)return new j(new Error("A schema object, and values are required"));for(n in b)b.hasOwnProperty(n)&&(!e.object(b[n])||a.isValidatableProperty(b[n])||b[n].__immutableCtor?p[n]=b[n]:p[n]=new f(b[n]),p[n].__immutableCtor&&(o=n.substring(0,1).toUpperCase()+n.substring(1),i[o]=p[n]));return m=new a(p),k(i,"merge",function(a,b){return new i(d.merge(a,b))}),k(i,"toObject",function(a){return d.cloneObject(a,{})}),k(i,"validate",function(b,c){return a.validate(m,b,c)}),k(i,"validateProperty",function(b,d,f){if(!b&&e.function(f))f([c.errors.validatePropertyInvalidArgs],!1);else if(!b)return{errors:[c.errors.validatePropertyInvalidArgs],result:!1};return a.validateProperty(m,d,b[d],f)}),k(i,"log",function(a){a?console.log(i.toObject(a)):console.log(null)}),k(i,"getSchema",function(){return d.cloneObject(b)}),k(i,"blueprint",m),k(i,"__immutableCtor",!0),i}function g(a,b,c,f){if(b[f].__immutableCtor&&e.function(b[f])){var g=b[f];d.setReadOnlyProperty(a,f,new g(c[f]),i(f))}else d.setReadOnlyProperty(a,f,d.copyValue(c[f]),i(f))}function h(a,b){d.setReadOnlyProperty(a,b,null,i(b))}function i(a){return function(){var d=new b(c.errorTypes.readOnlyViolation,new Error("Cannot set `"+a+"`. This object is immutable"));return l.onError(d),d}}function j(a,d){return new b(c.errorTypes.invalidArgumentException,a,d)}function k(a,e,f){d.setReadOnlyProperty(a,e,f,function(){var a=new b(c.errorTypes.readOnlyViolation,new Error(e+" is read-only"));return l.onError(a),a})}var l={onError:function(a){console.log(a)}};return f.configure=function(a){a=a||{},e.function(a.onError)&&(l.onError=a.onError)},f}var b,c={errorTypes:{invalidArgumentException:"InvalidArgumentException",readOnlyViolation:"ReadOnlyViolation"},errors:{initialValidationFailed:"The argument passed to the constructor is not valid",validatePropertyInvalidArgs:"To validate a property, you must provide the instance, and property name"}};if("undefined"!=typeof module&&module.exports)module.exports=a(require("./Blueprint.js"),require("./Exception.js"),require("./objectHelper.js"),require("./is.js"));else if(window){if(!(window.polyn&&window.polyn.Blueprint&&window.polyn.Exception&&window.polyn.objectHelper&&window.polyn.is))return console.log("Unable to define module: LOADED OUT OF ORDER");b=a(window.polyn.Blueprint,window.polyn.Exception,window.polyn.objectHelper,window.polyn.is),window.polyn.objectHelper.setReadOnlyProperty(window.polyn,"Immutable",b,function(){var a=new Error("[POLYN] polyn modules are read-only");return console.log(a),a})}else console.log("Unable to define module: UNKNOWN RUNTIME")}();